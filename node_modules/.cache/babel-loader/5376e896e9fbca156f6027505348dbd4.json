{"ast":null,"code":"import _slicedToArray from\"F:\\\\webDevProjects\\\\reactProj\\\\fitom-final-commit\\\\fitom-micro\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Card from'react-bootstrap/Card';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import LogNavComponent from'../LogNavComponent';import firebase from'../infocomponents/firebase';import{Link}from'react-router-dom';function OtpComponent(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setLogin=_useState2[1];setTimeout(function(){window.recaptchaVerifier=new firebase.auth.RecaptchaVerifier('recaptcha-container',{callback:function callback(response){submitPhoneNumberAuth();}});},2000);// This function runs when the 'sign-in-button' is clicked\n// Takes the value from the 'phoneNumber' input and sends SMS to that phone number\nfunction submitPhoneNumberAuth(){var no=document.getElementById('formPhone').value;var phoneNumber='+91'+no.toString();console.log(phoneNumber);var appVerifier=window.recaptchaVerifier;document.getElementById('verify-text').textContent='Verify reCAPTCHA to send code';firebase.auth().signOut().then(function(){console.log('Sign-out successful');}).catch(function(error){console.log('An error happened');});firebase.auth().signInWithPhoneNumber(phoneNumber,appVerifier).then(function(confirmationResult){console.log(confirmationResult);window.confirmationResult=confirmationResult;console.log(window);}).catch(function(error){console.log(error);});}// This function runs when the 'confirm-code' button is clicked\n// Takes the value from the 'code' input and submits the code to verify the phone number\n// Return a user object if the authentication was successful, and auth is complete\nfunction submitPhoneNumberAuthCode(){var code=document.getElementById('formCode').value;window.confirmationResult.confirm(code).then(function(result){var user=result.user;console.log(user);}).catch(function(error){console.log(error);});}firebase.auth().onAuthStateChanged(function(user){if(user){console.log('USER LOGGED IN');setLogin(!loggedIn);props.history.push('/booking');}else{// No user is signed in.\nconsole.log('USER NOT LOGGED IN');setLogin(loggedIn);}});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(LogNavComponent,null),/*#__PURE__*/React.createElement(Container,{className:\"Login-component\",fluid:true},/*#__PURE__*/React.createElement(Container,{className:\"pt-5 \"},/*#__PURE__*/React.createElement(Container,{className:\"pt-4 \"},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(Col,{md:7,lg:6,className:\"my-auto\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(\"h3\",{className:\"slogan-1 font-weight-bold\"},\"Otp Login\")),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formPhone\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Phone Number\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"number\",placeholder:\"Phone\"})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formCode\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Verification Code\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Code\"}),/*#__PURE__*/React.createElement(Link,{to:\"/login\",style:{textDecoration:'none',color:'white'}},/*#__PURE__*/React.createElement(Form.Text,{className:\"text-muted pt-2\"},\"Sign In with Email\"))),/*#__PURE__*/React.createElement(\"small\",null,/*#__PURE__*/React.createElement(\"div\",{id:\"verify-text\"})),/*#__PURE__*/React.createElement(\"div\",{id:\"recaptcha-container\"}),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",id:\"signButton\",className:\"mt-3\",onClick:submitPhoneNumberAuth},\"Send Code\"),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",id:\"confirmButton\",className:\"mt-3 ml-4\",onClick:submitPhoneNumberAuthCode},\"Sign In\"))))),/*#__PURE__*/React.createElement(Container,{className:\"mt-3 \"},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(Col,{md:10,className:\"my-auto \"},/*#__PURE__*/React.createElement(Link,{to:\"/register\",style:{textDecoration:'none',color:'white'}},/*#__PURE__*/React.createElement(\"h4\",{className:\"slogan-1 text-light text-center\"},' ',\"New to FITOM ? Register\",' ')))))))))));}export default OtpComponent;","map":{"version":3,"sources":["F:/webDevProjects/reactProj/fitom-final-commit/fitom-micro/src/components/otpcomponents/OtpComponent.js"],"names":["React","useState","Card","Container","Row","Col","Form","Button","LogNavComponent","firebase","Link","OtpComponent","props","loggedIn","setLogin","setTimeout","window","recaptchaVerifier","auth","RecaptchaVerifier","callback","response","submitPhoneNumberAuth","no","document","getElementById","value","phoneNumber","toString","console","log","appVerifier","textContent","signOut","then","catch","error","signInWithPhoneNumber","confirmationResult","submitPhoneNumberAuthCode","code","confirm","result","user","onAuthStateChanged","history","push","textDecoration","color"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport LogNavComponent from '../LogNavComponent';\r\nimport firebase from '../infocomponents/firebase';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction OtpComponent(props) {\r\n\tconst [ loggedIn, setLogin ] = useState(false);\r\n\r\n\tsetTimeout(function() {\r\n\t\twindow.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {\r\n\t\t\tcallback: function(response) {\r\n\t\t\t\tsubmitPhoneNumberAuth();\r\n\t\t\t}\r\n\t\t});\r\n\t}, 2000);\r\n\r\n\t// This function runs when the 'sign-in-button' is clicked\r\n\t// Takes the value from the 'phoneNumber' input and sends SMS to that phone number\r\n\tfunction submitPhoneNumberAuth() {\r\n\t\tvar no = document.getElementById('formPhone').value;\r\n\t\tvar phoneNumber = '+91' + no.toString();\r\n\t\tconsole.log(phoneNumber);\r\n\t\tvar appVerifier = window.recaptchaVerifier;\r\n\t\tdocument.getElementById('verify-text').textContent = 'Verify reCAPTCHA to send code';\r\n\t\tfirebase\r\n\t\t\t.auth()\r\n\t\t\t.signOut()\r\n\t\t\t.then(function() {\r\n\t\t\t\tconsole.log('Sign-out successful');\r\n\t\t\t})\r\n\t\t\t.catch(function(error) {\r\n\t\t\t\tconsole.log('An error happened');\r\n\t\t\t});\r\n\t\tfirebase\r\n\t\t\t.auth()\r\n\t\t\t.signInWithPhoneNumber(phoneNumber, appVerifier)\r\n\t\t\t.then(function(confirmationResult) {\r\n\t\t\t\tconsole.log(confirmationResult);\r\n\t\t\t\twindow.confirmationResult = confirmationResult;\r\n\t\t\t\tconsole.log(window);\r\n\t\t\t})\r\n\t\t\t.catch(function(error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t});\r\n\t}\r\n\r\n\t// This function runs when the 'confirm-code' button is clicked\r\n\t// Takes the value from the 'code' input and submits the code to verify the phone number\r\n\t// Return a user object if the authentication was successful, and auth is complete\r\n\tfunction submitPhoneNumberAuthCode() {\r\n\t\tvar code = document.getElementById('formCode').value;\r\n\t\twindow.confirmationResult\r\n\t\t\t.confirm(code)\r\n\t\t\t.then(function(result) {\r\n\t\t\t\tvar user = result.user;\r\n\t\t\t\tconsole.log(user);\r\n\t\t\t})\r\n\t\t\t.catch(function(error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t});\r\n\t}\r\n\tfirebase.auth().onAuthStateChanged(function(user) {\r\n\t\tif (user) {\r\n\t\t\tconsole.log('USER LOGGED IN');\r\n\t\t\tsetLogin(!loggedIn);\r\n\t\t\tprops.history.push('/booking');\r\n\t\t} else {\r\n\t\t\t// No user is signed in.\r\n\t\t\tconsole.log('USER NOT LOGGED IN');\r\n\t\t\tsetLogin(loggedIn);\r\n\t\t}\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<LogNavComponent />\r\n\t\t\t<Container className=\"Login-component\" fluid>\r\n\t\t\t\t<Container className=\"pt-5 \">\r\n\t\t\t\t\t<Container className=\"pt-4 \">\r\n\t\t\t\t\t\t<Row className=\"justify-content-center\">\r\n\t\t\t\t\t\t\t<Col md={7} lg={6} className=\"my-auto\">\r\n\t\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t\t<Card.Header>\r\n\t\t\t\t\t\t\t\t\t\t<h3 className=\"slogan-1 font-weight-bold\">Otp Login</h3>\r\n\t\t\t\t\t\t\t\t\t</Card.Header>\r\n\t\t\t\t\t\t\t\t\t<Card.Body>\r\n\t\t\t\t\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Group controlId=\"formPhone\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Label>Phone Number</Form.Label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control type=\"number\" placeholder=\"Phone\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Group controlId=\"formCode\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Label>Verification Code</Form.Label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control type=\"password\" placeholder=\"Code\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link to=\"/login\" style={{ textDecoration: 'none', color: 'white' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Form.Text className=\"text-muted pt-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tSign In with Email\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Form.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t\t\t<small>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"verify-text\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t\t\t\t\t<div id=\"recaptcha-container\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"signButton\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={submitPhoneNumberAuth}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tSend Code\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"confirmButton\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-3 ml-4\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={submitPhoneNumberAuthCode}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tSign In\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t\t<Container className=\"mt-3 \">\r\n\t\t\t\t\t\t\t\t\t<Row className=\"justify-content-center\">\r\n\t\t\t\t\t\t\t\t\t\t<Col md={10} className=\"my-auto \">\r\n\t\t\t\t\t\t\t\t\t\t\t<Link to=\"/register\" style={{ textDecoration: 'none', color: 'white' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"slogan-1 text-light text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tNew to FITOM ? Register{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</Container>\r\n\t\t\t</Container>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default OtpComponent;\r\n"]},"metadata":{},"sourceType":"module"}